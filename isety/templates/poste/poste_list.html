<!-- poste_list.html -->
{% extends "base.html" %} {% block content %}

<br>

<div class="text-center fixed top-4 left-4 z-50">
    <button class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800" type="button" data-drawer-target="drawer-disable-body-scrolling" data-drawer-show="drawer-disable-body-scrolling" data-drawer-body-scrolling="false" aria-controls="drawer-disable-body-scrolling">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
        </svg>
    </button>
</div>
<!-- drawer component -->
<div id="drawer-disable-body-scrolling" class="fixed top-0 left-0 z-40 h-screen p-4 overflow-y-auto transition-transform -translate-x-full bg-white w-64 dark:bg-gray-800" tabindex="-1" aria-labelledby="drawer-disable-body-scrolling-label">
    <h5 id="drawer-disable-body-scrolling-label" class="text-base font-semibold text-gray-500 uppercase dark:text-gray-400">Menu</h5>
    <button type="button" data-drawer-hide="drawer-disable-body-scrolling" aria-controls="drawer-disable-body-scrolling" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 absolute top-2.5 end-2.5 inline-flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white" >
      <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
         <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
      </svg>
      <span class="sr-only">Close menu</span>
   </button>
   <br>
  <div class="py-4 overflow-y-auto">
      <ul class="space-y-2 font-medium">
         <li>
            <a href="#" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
              
               <div >
  <!-- Added flex and items-center -->
  <label for="dropdown-item" class="sr-only">Create a poste</label>
  <select
    name="dropdown-item"
    id="dropdown-item"
    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-gray-500 focus:border-gray-500 block w-40 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
  >
    <option value="recommandation">recommandation</option>
    <option value="stage">Stage</option>
    <option value="transport">transport</option>
    <option value="logement">logement</option>
  </select>
  <button
    type="button"
    id="createPosteBtn"
    class=" text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
  >
    Post 
  </button>
</div>
            </a>
         </li>
         <li>
            <button type="button" class="flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700" aria-controls="dropdown-example" data-collapse-toggle="dropdown-example">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" />
</svg>

                  <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">Events</span>
                  <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                     <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                  </svg>
            </button>
            <ul id="dropdown-example" class="hidden py-2 space-y-2">
               <li>
                     <a href="{% url 'event_list'  %}" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418" />
</svg>

Discover </a>
                     
</li>
                  <li>
                    
                     <a href="{% url 'create_event' %} " class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                       
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
</svg>


                       Add event</a>
                  </li>
                  <li>
                     <a href="{% url 'my_events' %}" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
</svg>
My events</a>
                     
</li>
            </ul>
         </li>
         
         
         

         
         {% comment %} drop for firends {% endcomment %}
        <li>
            <button type="button" class="flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700" aria-controls="dropdown-dropdown" data-collapse-toggle="dropdown-dropdown">
            <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18">
            <path d="M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z"/>
        </svg>
                  <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">Friends</span>
                  <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                     <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                  </svg>
            </button>
            <ul id="dropdown-dropdown" class="hidden py-2 space-y-2">
                       {% for friend in friends %}
                      <li>
      <a href="{% url 'profile' friend.id %}" class=" px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700 flex items-center">
    <img src="{{ friend.photo.url }}" class="w-10 h-10 rounded-full mr-2" alt="Friend Image">
    <span>{{ friend.first_name }} {{ friend.last_name }}</span>
</a>
        </li>
          {% endfor %}
   
            </ul>
         </li>


         <li>
            <button type="button" class="flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700" aria-controls="dropdown-msg" data-collapse-toggle="dropdown-msg">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
</svg>

                  <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">Messages</span>
                  <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                     <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                  </svg>
            </button>
           <ul id="dropdown-msg" class="hidden py-2 space-y-2">
       {% for conversation in conversations %}
                        <li>
                            <a href="{% url 'conversation_detail' conversation.id %}" class="px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700 flex items-center">
                                <img src="/media/isety.png" class="w-10 h-10 rounded-full mr-2" alt="Conversation Image">
                                <span>Conversation with {{ conversation.participants.all|join:', ' }}</span>
                            </a>
                        </li>
                    {% endfor %}
   
            </ul>
         </li>
{% comment %} end  {% endcomment %}

         
         <li>
            <a href="{% url 'profile_settings' %}" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
</svg>

               <span class="flex-1 ms-3 whitespace-nowrap">Settings</span>
            </a>
         </li>
      </ul>
   </div>
 </div>



<script>
  document
    .getElementById("createPosteBtn")
    .addEventListener("click", function () {
      const selectedPostType = document.getElementById("dropdown-item").value;
      const createUrl = "/post/create/" + selectedPostType + "/";
      window.location.href = createUrl;
    });
</script>
<section class="p-44">
  <div
    class="top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px"
    style="transform: translateZ(0px)"
  >
    <svg
      class="absolute bottom-0 overflow-hidden"
      xmlns="http://www.w3.org/2000/svg"
      preserveAspectRatio="none"
      version="1.1"
      viewBox="0 0 2560 100"
      x="0"
      y="0"
    >
      <polygon
        class="text-blueGray-200 fill-current"
        points="2560 0 2560 100 0 100"
      ></polygon>
    </svg>
  </div>
</section>
<section class="relative py-16 bg-blueGray-200">
  <div class="container mx-auto px-4 content-evenly">
    <div
      class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64"
    >
      <div class="px-6 ">
        <div class="mx-auto my-10 flex max-w-xs flex-col items-center rounded-xl border px-4 py-4 text-center md:max-w-lg md:flex-row md:items-start md:text-left">
  <div class="mb-4 md:mr-6 md:mb-0">
    <img class="h-56 rounded-lg object-cover md:w-56" src="{{user.photo.url}}" alt="" />
  </div>
  <div class="">
    <p class="text-xl font-medium text-gray-700">{{user.first_name}} {{user.last_name}}</p>
    <p class="mb-4 text-sm font-medium text-gray-500">{{user.email}}</p> 
    <div class="flex space-x-2">
      <div class="flex flex-col items-center rounded-xl bg-gray-100 px-4 py-2">
        <p class="text-sm font-medium text-gray-500">Postes</p>
        <p class="text-3xl font-medium text-gray-600">{{ user_posts_count }}</p>
      </div>
      <div class="flex flex-col items-center rounded-xl bg-gray-100 px-4 py-2">
        <p class="text-sm font-medium text-gray-500">Events</p>
        <p class="text-3xl font-medium text-gray-600">{{user_events_count}}</p>
      </div>
      <div class="flex flex-col items-center rounded-xl bg-gray-100 px-4 py-2">
        <p class="text-sm font-medium text-gray-500">Friends</p>
        <p class="text-3xl font-medium text-gray-600">
          {{user.friends.count}}
        </p>
      </div>
      <div class=""></div>
    </div>
    <div class="mb-3"></div>
    
  </div>

</div>
          <hr />
          <br />


<div class="flex justify-center space-x-4 mb-4">
  <a href="?filter=my_posts" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:bg-blue-600">My Posts</a>
  <a href="?filter=my_events" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 focus:outline-none focus:bg-green-600">My Events</a>
</div>

<!-- Postes cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 content-evenly">
  {% for poste in postes %}
  <div class="mb-2 text-blueGray-600 mt-10 justify-evenly">
    <div class="max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 justify-evenly relative">
      <input type="checkbox" class="absolute top-2 left-2 hidden delete-checkbox" value="{{ poste.id }}">
      
    <!-- Dropdown Trigger -->
                <div class="absolute top-2 right-2">
  <button id="dropdownMenuButton{{ poste.id }}" data-dropdown-toggle="dropdownMenu{{ poste.id }}" class="text-gray-500 hover:text-gray-700">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
      <path fill-rule="evenodd" d="M3 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 5.25Zm0 4.5A.75.75 0 0 1 3.75 9h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 9.75Zm0 4.5a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Zm0 4.5a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
    </svg>
  </button>
  <!-- Dropdown Menu -->
  <div id="dropdownMenu{{ poste.id }}" class="hidden z-10 w-44 bg-white rounded shadow-md dark:bg-gray-700">
    <ul class="py-1 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownMenuButton{{ poste.id }}">
      <li>
        {% comment %} <button data-modal-target="popup-modal" data-modal-toggle="popup-modal" data-post-id="{{ poste.id }}" class="block w-full px-4 py-2 text-left">Edit</button> {% endcomment %}
      </li>
      <li>
        <!-- Add onclick event to toggle delete confirmation modal -->
        <button  data-modal-target="popup-modal" data-modal-toggle="popup-modal" data-post-id="{{ poste.id }}" class="block w-full px-4 py-2 text-left text-red-600 hover:bg-red-50">Delete</button>
      </li>
      {% comment %} onclick="showDeleteConfirmation({{ poste.id }})" {% endcomment %}
    </ul>
  </div>
</div>

      

      {% if poste.image %}
            <img class="rounded-t-lg mx-auto w-auto" src="{{ poste.image.url }}" alt="" />
          {% else %}
            <img class="rounded-t-lg mx-auto w-20" src="{{ '/media/isety.png' }}" alt="No image available" />
          {% endif %}
      <div class="p-5">
        <a href="{% url 'poste_detail' id=poste.id %}">
          <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
            {{ poste.poste_field }}
          </h5>
        </a>
        {% if poste.poste_field == 'recommandation' %}
          {% if poste.recommandation %}
            <p class="mb-1 font-bold text-blue-500 dark:text-blue-400">
              {{ poste.recommandation.texte }}

            </p>
            <button
    class="block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
    type="button"
    onclick="window.location.href='{% url 'poste_detail' id=poste.id %}'"
>
    Details
</button>
          {% endif %}
        {% elif poste.poste_field == 'transport' %}
          {% if poste.transport %}
            <p class="mb-1 font-bold text-blue-500 dark:text-blue-400">
              Depart: {{ poste.transport.depart }}, Destination: {{ poste.transport.destination }}
            </p>
              <button
    class="block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
    type="button"
    onclick="window.location.href='{% url 'poste_detail' id=poste.id %}'"
>
    Details
</button>
          {% endif %}
        {% elif poste.poste_field == 'logement' %}
          {% if poste.logement %}
            <p class="mb-1 font-bold text-blue-500 dark:text-blue-400">
              Localisation: {{ poste.logement.localisation }}
            </p>
                  <button
    class="block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
    type="button"
    onclick="window.location.href='{% url 'poste_detail' id=poste.id %}'"
>
    Details
</button>
          {% endif %}
        {% elif poste.poste_field == 'stage' %}
          {% if poste.stage %}
            <p class="mb-1 font-bold text-blue-500 dark:text-blue-400">
              Type: {{ poste.stage.get_typeStg_display }}
            </p>
             <button
    class="block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
    type="button"
    onclick="window.location.href='{% url 'poste_detail' id=poste.id %}'">
    Details
</button>
          {% endif %}
        {% endif %}
      </div>

      
  

<div id="popup-modal" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative p-4 w-full max-w-md max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
            <button type="button" class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="popup-modal">
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
                <span class="sr-only">Close modal</span>
            </button>
            <div class="p-4 md:p-5 text-center">
                <svg class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                </svg>
                <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">Are you sure you want to delete this product?</h3>
                <form action="{% url 'delete_poste' poste.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center">Yes, I'm sure</button>
        </form>

                <button data-modal-hide="popup-modal" type="button" class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700">No, cancel</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div id="default-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
  <div class="relative p-4 w-full max-w-2xl max-h-full">
    <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
      <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white" id="modalPostTitle">
          Post Details
        </h3>
        <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="default-modal">
          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
          </svg>
          <span class="sr-only">Close modal</span>
        </button>
      </div>
      <div class="p-4 md:p-5 space-y-4">
        <img id="modalPostImage" src="" alt="Post Image" class="rounded-t-lg w-1/3 mx-auto" />
        <p id="modalPostField" class="text-base leading-relaxed text-gray-500 dark:text-gray-400"></p>
        <p id="modalPostDescription" class="text-base leading-relaxed text-gray-500 dark:text-gray-400"></p>
        <p id="modalPostSpecific" class="text-base leading-relaxed text-gray-500 dark:text-gray-400"></p>
      </div>
      <div class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600">
        <button data-modal-hide="default-modal" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Close</button>
        
      </div>
    </div>
  </div>
</div>




<script>
    // Function to show delete confirmation modal
  function showDeleteConfirmation(postId) {
    // Construct the ID of the modal
    var modalId = "popup-modal-" + postId;
    
    // Get the modal element
    var modal = document.getElementById(modalId);
    
    // If modal exists, toggle its visibility
    if (modal) {
      modal.classList.toggle("hidden");
    }
  }
</script>
{% comment %} <script>
  document.querySelectorAll('[data-modal-toggle="default-modal"]').forEach(button => {
    button.addEventListener('click', function () {
      const postId = this.getAttribute('data-post-id');
      const postField = this.getAttribute('data-post-field');
      const postDescription = this.getAttribute('data-post-description');
      const postImageUrl = this.getAttribute('data-post-image-url');

      document.getElementById('modalPostTitle').innerText = `Post ID: ${postId}`;
      document.getElementById('modalPostField').innerText = postField;
      document.getElementById('modalPostDescription').innerText = postDescription;
      document.getElementById('modalPostImage').src = postImageUrl;

      if (postField === 'recommandation') {
        const postTexte = this.getAttribute('data-post-texte');
        document.getElementById('modalPostSpecific').innerText = `Texte: ${postTexte}`;
      } else if (postField === 'transport') {
        const postDepart = this.getAttribute('data-post-depart');
        const postDestination = this.getAttribute('data-post-destination');
        document.getElementById('modalPostSpecific').innerText = `Depart: ${postDepart}, Destination: ${postDestination}`;
      } else if (postField === 'logement') {
        const postLocalisation = this.getAttribute('data-post-localisation');
        document.getElementById('modalPostSpecific').innerText = `Localisation: ${postLocalisation}`;
      } else if (postField === 'stage') {
        const postType = this.getAttribute('data-post-type');
        document.getElementById('modalPostSpecific').innerText = `Type: ${postType}`;
      }

      const modal = document.getElementById('default-modal');
      modal.classList.remove('hidden');
    });
  });

  document.querySelectorAll('[data-modal-hide="default-modal"]').forEach(button => {
    button.addEventListener('click', function () {
      const modal = document.getElementById('default-modal');
      modal.classList.add('hidden');
    });
  });
</script> {% endcomment %}


    </div>
  </div>
  
  {% endfor %}

{% for event in events %}
<div class="mx-auto my-10 max-w-xs rounded-xl px-6 py-10 text-gray-600 shadow">
  {% if event.date_enev > today %}
    <div class="mb-4 rounded-md bg-red-100 px-2 py-1 text-sm font-medium text-red-700 capitalize">{{ event.title }}</div>
  {% else %}
    <div class="mb-4 rounded-md bg-blue-100 px-2 py-1 text-sm font-medium text-blue-700 capitalize">{{ event.title }}</div>
  {% endif %}
  <p class="mb-2 text-2xl"><img src="{{ event.img.url }}" class=" w-50 h-64"></p>
  <p class="mb-6 text-gray-400">{{ event.description }}</p>
    <p class="mb-6 text-gray-400">{{ event.date_enev }}</p>
    
    <p class="mb-6 text-black">Available spots: {{ event.place_dispo }}</p>

  <div class="flex justify-center">
    <a href="{% url 'event_detail' id=event.id %}" >
    <button class="flex items-center space-x-2 rounded-md border-2 border-blue-500 px-4 py-2 font-medium text-blue-600 transition hover:bg-blue-500 hover:text-white">
      <span>Learn more</span>
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6">
          <path fill-rule="evenodd" d="M16.72 7.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 010 1.06l-3.75 3.75a.75.75 0 11-1.06-1.06l2.47-2.47H3a.75.75 0 010-1.5h16.19l-2.47-2.47a.75.75 0 010-1.06z" clip-rule="evenodd" />
        </svg>
      </span>
    </button>
    </a>
  </div>
</div>
{% endfor %}
</div>
</section>








{% endblock %}
